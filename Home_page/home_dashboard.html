<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StatwellMD - Home Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* StatwellMD Colors */
            --statwell-teal: #40BFAA;
            --statwell-blue: #5D78FF;
            --statwell-navy: #2A3B54;
            --statwell-coral: #FF6B6B;
            --statwell-white: #F5F7FA;
            --white: #FFFFFF;
            --light-gray: #f1f3f6;
            --bg-primary: var(--white);
            --bg-secondary: var(--statwell-white);
            --text-primary: var(--statwell-navy);
            --text-secondary: #94A49A;
            --border-secondary: #e0e0e0;
            --primary: var(--statwell-blue);
            --secondary: var(--statwell-teal);
            --success: #10B981;
            --warning: #F59E0B;
            --error: var(--statwell-coral);
            --font-primary: 'Avenir Next', sans-serif;
            --font-secondary: 'Inter', sans-serif;
            --space-sm: 8px; --space-md: 16px; --space-lg: 24px; --space-xl: 32px;
            --anim-normal: 0.3s;
            --smooth: cubic-bezier(0.25, 1, 0.5, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-secondary); line-height: 1.6; background: var(--bg-secondary); color: var(--text-primary); }

        /* Layout */
        .dashboard-container { display: flex; min-height: 100vh; }
        .sidebar { 
            width: 280px; 
            background: linear-gradient(180deg, var(--statwell-navy) 0%, #1a1f3a 100%); 
            color: var(--white); 
            padding: var(--space-xl); 
            position: fixed; 
            height: 100vh; 
            overflow-y: auto; 
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }
        .main-content { flex: 1; padding: var(--space-xl); margin-left: 280px; }

        /* Sidebar */
        .logo { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-xl); }
        .logo-icon { 
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, var(--primary), var(--statwell-teal)); 
            border-radius: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: var(--white); 
            font-weight: 700; 
            box-shadow: 0 4px 12px rgba(93, 120, 255, 0.3);
        }
        .nav-menu { list-style: none; }
        .nav-item { margin-bottom: var(--space-sm); }
        .nav-link { 
            display: flex; 
            align-items: center; 
            gap: var(--space-sm); 
            padding: var(--space-sm) var(--space-md); 
            border-radius: 12px; 
            color: rgba(255, 255, 255, 0.8); 
            text-decoration: none; 
            transition: all var(--anim-normal);
            position: relative;
        }
        .nav-link:hover { 
            background: rgba(93, 120, 255, 0.1); 
            color: var(--white);
            transform: translateX(4px);
        }
        .nav-link.active { 
            background: rgba(93, 120, 255, 0.15); 
            color: var(--white);
            font-weight: 600;
            box-shadow: inset 0 0 20px rgba(93, 120, 255, 0.1);
        }
        .nav-link::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 0;
            background: linear-gradient(180deg, var(--primary), var(--statwell-teal));
            border-radius: 2px;
            transition: height var(--anim-normal);
        }
        .nav-link:hover::before,
        .nav-link.active::before {
            height: 20px;
        }
        .nav-icon { 
            width: 20px; 
            height: 20px; 
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .nav-badge { 
            background: var(--warning); 
            color: var(--white); 
            padding: 2px 6px; 
            border-radius: 10px; 
            font-size: 12px; 
            font-weight: 600;
            margin-left: auto;
        }

        /* Platform Switcher */
        .user-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            margin-bottom: var(--space-xl);
        }
        .platform-switcher {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all var(--anim-normal);
            width: 100%;
            padding: var(--space-sm);
            border-radius: 8px;
            gap: var(--space-lg);
        }
        .platform-switcher:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .platform-dropdown {
            position: relative;
            display: inline-block;
        }
        .platform-dropdown-content {
            display: none;
            position: absolute;
            background: linear-gradient(180deg, var(--statwell-navy) 0%, #1a1f3a 100%);
            min-width: 220px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(93, 120, 255, 0.2);
            z-index: 1000;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 8px;
            padding: var(--space-sm);
        }
        .platform-dropdown-content.show {
            display: block;
        }
        .platform-dropdown-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all var(--anim-normal);
            border-radius: 8px;
            margin-bottom: 2px;
        }
        .platform-dropdown-item:hover {
            background: rgba(93, 120, 255, 0.2);
            color: var(--white);
            transform: translateX(4px);
        }
        .dropdown-icon {
            width: 16px;
            height: 16px;
            stroke: rgba(255, 255, 255, 0.8);
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .chevron-icon {
            width: 16px;
            height: 16px;
            stroke: rgba(255, 255, 255, 0.8);
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: transform var(--anim-normal);
        }
        .platform-switcher.open .chevron-icon {
            transform: rotate(180deg);
        }

        /* Header */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-xl); }
        .welcome-text { font-size: 14px; color: var(--text-secondary); }
        .page-title { font-size: 32px; font-weight: 700; font-family: var(--font-primary); margin-top: var(--space-sm); }
        .header-actions { display: flex; gap: var(--space-md); }

        /* Buttons */
        .btn { display: inline-flex; align-items: center; gap: var(--space-sm); padding: 12px 24px; border-radius: 12px; font-weight: 600; border: 1px solid transparent; cursor: pointer; transition: all var(--anim-normal) var(--smooth); text-decoration: none; font-size: 14px; }
        .btn-primary { background: var(--primary); color: var(--white); box-shadow: 0 2px 4px rgba(93, 120, 255, 0.2); }
        .btn-primary:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(93, 120, 255, 0.3); }
        .btn-secondary { background: var(--white); color: var(--primary); border-color: var(--primary); }
        .btn-secondary:hover { background: var(--light-gray); }

        /* Tabs */
        .tabs-container { display: flex; gap: var(--space-md); margin-bottom: var(--space-xl); border-bottom: 2px solid var(--border-secondary); }
        .tab { padding: var(--space-md) var(--space-lg); cursor: pointer; transition: all var(--anim-normal); position: relative; background: transparent; border-bottom: 3px solid transparent; font-weight: 600; font-size: 16px; }
        .tab.active { color: var(--primary); border-bottom-color: var(--primary); }
        .tab:not(.active) { color: var(--text-secondary); }
        .tab:not(.active):hover { color: var(--text-primary); }
        .tab-badge { background: var(--primary); color: var(--white); padding: 4px 10px; border-radius: 12px; font-size: 13px; margin-left: var(--space-sm); font-weight: 700; }

        /* Session Task Tabs */
        .session-task-tabs { display: flex; gap: var(--space-sm); margin-bottom: var(--space-lg); padding: 0 var(--space-lg); }
        .session-task-tab { padding: 6px 12px; border-radius: 6px; cursor: pointer; transition: all var(--anim-normal); font-size: 14px; font-weight: 500; position: relative; border-bottom: 3px solid transparent; display: flex; align-items: center; gap: var(--space-sm); }
        .session-task-tab.active { color: var(--primary); border-bottom-color: var(--primary); }
        .session-task-tab:not(.active) { color: var(--text-secondary); }
        .session-task-tab:not(.active):hover { color: var(--text-primary); }
        .session-task-counter { background: var(--warning); color: var(--white); padding: 2px 6px; border-radius: 10px; font-size: 12px; font-weight: 600; }

        /* Session Cards */
        .session-card { 
            background: var(--white); 
            border-radius: 16px; 
            margin-bottom: var(--space-md); 
            border: 1px solid rgba(93, 120, 255, 0.12); 
            overflow: hidden;
            transition: all var(--anim-normal);
        }
        .session-card:hover {
            border-color: rgba(93, 120, 255, 0.25);
            box-shadow: 0 2px 12px rgba(93, 120, 255, 0.1);
        }
        .session-header { padding: var(--space-lg); border-bottom: 1px solid var(--border-secondary); display: flex; align-items: center; justify-content: space-between; cursor: pointer; }
        .session-info { display: flex; align-items: center; gap: var(--space-md); }
        .session-progress-line { 
            position: relative; 
            width: 4px; 
            background: linear-gradient(180deg, var(--primary), var(--statwell-teal)); 
            border-radius: 2px; 
            margin-right: var(--space-md);
        }
        .session-progress-line::before { 
            content: ''; 
            position: absolute; 
            top: -4px; 
            left: -4px; 
            width: 12px; 
            height: 12px; 
            background: var(--primary); 
            border-radius: 50%;
            border: 3px solid var(--white);
            box-shadow: 0 0 0 2px rgba(93, 120, 255, 0.2);
        }
        .session-progress-line::after { 
            content: ''; 
            position: absolute; 
            bottom: -4px; 
            left: -4px; 
            width: 12px; 
            height: 12px; 
            background: var(--statwell-teal); 
            border-radius: 50%;
            border: 3px solid var(--white);
            box-shadow: 0 0 0 2px rgba(64, 191, 170, 0.2);
        }
        .session-title-row { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm); }
        .session-title { font-weight: 600; font-size: 16px; }
        .session-badge { 
            background: linear-gradient(135deg, var(--warning), #f59e0b); 
            color: var(--white); 
            padding: 6px 12px; 
            border-radius: 12px; 
            font-size: 12px; 
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(245, 158, 11, 0.2);
        }
        .session-badge.completed { 
            background: linear-gradient(135deg, var(--success), #059669); 
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
        }
        .session-stats { display: flex; gap: var(--space-lg); font-size: 14px; color: var(--text-secondary); }
        .collapse-icon { transition: transform var(--anim-normal); }
        .session-card.expanded .collapse-icon { transform: rotate(180deg); }

        /* Session Task Tabs */
        .session-task-tabs { 
            display: flex; 
            gap: var(--space-sm); 
            margin-bottom: var(--space-md); 
            padding: 0 var(--space-lg); 
            margin-top: var(--space-sm);
        }
        .session-task-tab { 
            padding: 6px 12px; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all var(--anim-normal); 
            font-weight: 500; 
            font-size: 14px;
            color: var(--text-secondary); 
            background: var(--light-gray);
            border: 1px solid transparent;
            display: flex; 
            align-items: center; 
            gap: var(--space-sm);
        }
        .session-task-tab.active { 
            color: var(--primary); 
            background: rgba(93, 120, 255, 0.1); 
            border-color: rgba(93, 120, 255, 0.2);
        }
        .session-task-tab:hover:not(.active) { 
            color: var(--text-primary); 
            background: var(--white);
            border-color: var(--border-secondary);
        }
        .session-task-counter { 
            background: var(--warning); 
            color: var(--white); 
            padding: 2px 6px; 
            border-radius: 10px; 
            font-size: 11px; 
            font-weight: 600;
        }
        
        /* Disabled To-do Tab for Completed Sessions */
        .session-card[data-status="completed"] .session-task-tab:first-child {
            opacity: 0.4;
            pointer-events: none;
            cursor: not-allowed;
        }

        /* Task Cards */
        .task-card { 
            background: var(--white); 
            border-radius: 16px; 
            margin-bottom: var(--space-sm); 
            border: 1px solid rgba(93, 120, 255, 0.12); 
            overflow: hidden;
            transition: all var(--anim-normal);
        }
        .task-card:hover {
            border-color: rgba(93, 120, 255, 0.25);
            box-shadow: 0 2px 12px rgba(93, 120, 255, 0.1);
        }
        .task-header { padding: var(--space-lg); display: flex; align-items: center; gap: var(--space-md); cursor: pointer; }
        .task-icon { 
            width: 24px; 
            height: 24px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 12px; 
            font-weight: 600; 
            flex-shrink: 0;
            transition: all var(--anim-normal);
        }
        .task-icon.pending { 
            border: 2px solid var(--primary); 
            color: var(--primary); 
            background: var(--white);
            box-shadow: 0 0 0 2px rgba(93, 120, 255, 0.1);
        }
        .task-icon.completed { 
            background: linear-gradient(135deg, var(--success), #059669); 
            color: var(--white); 
            border: none;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        .task-content-wrapper { display: flex; flex-direction: column; flex: 1; }
        .task-title-row { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm); }
        .task-title { font-weight: 600; font-size: 16px; }
        .priority-badge { 
            background: linear-gradient(135deg, var(--error), #dc2626); 
            color: var(--white); 
            padding: 4px 8px; 
            border-radius: 8px; 
            font-size: 10px; 
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.2);
        }
        .task-date { font-size: 14px; color: var(--text-secondary); display: flex; align-items: center; gap: var(--space-sm); }
        .task-actions { display: flex; align-items: center; gap: var(--space-sm); }
        .task-collapse-icon { transition: transform var(--anim-normal); }
        .task-card.expanded .task-collapse-icon { transform: rotate(180deg); }

        .task-content { padding: 0 var(--space-lg) var(--space-lg); display: none; }
        .task-card.expanded .task-content { display: block; }
        .task-description { margin-bottom: var(--space-md); color: var(--text-secondary); line-height: 1.5; }
        .task-details { 
            display: flex; 
            flex-direction: column; 
            gap: var(--space-sm); 
            margin-bottom: var(--space-md); 
            background: rgba(93, 120, 255, 0.05);
            padding: var(--space-md);
            border-radius: 12px;
            border: 1px solid rgba(93, 120, 255, 0.1);
        }
        .task-detail { display: flex; justify-content: space-between; align-items: center; }
        .task-detail-label { font-weight: 600; font-size: 14px; }
        .task-detail-value { font-size: 14px; color: var(--text-secondary); }
        .support-link { font-size: 14px; color: var(--text-secondary); margin-top: var(--space-md); }

        /* Review State */
        .review-state { padding: var(--space-xl); text-align: center; background: var(--light-gray); border-radius: 12px; margin: var(--space-lg); }
        .review-icon { width: 60px; height: 60px; border-radius: 50%; background: var(--primary); margin: 0 auto var(--space-md); display: flex; align-items: center; justify-content: center; color: var(--white); font-size: 24px; }
        .review-title { font-weight: 600; margin-bottom: var(--space-sm); font-size: 18px; }
        .review-description { color: var(--text-secondary); font-size: 14px; }

        /* Demo Controls */
        .demo-controls { position: fixed; top: var(--space-lg); right: var(--space-lg); background: var(--white); padding: var(--space-md); border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); z-index: 1000; border: 1px solid var(--border-secondary); min-width: 180px; }
        .demo-controls h3 { font-size: 14px; font-weight: 600; margin-bottom: var(--space-sm); }
        .demo-buttons { display: flex; flex-direction: column; gap: var(--space-sm); }
        .demo-btn { padding: 8px 12px; background: var(--light-gray); border: 1px solid var(--border-secondary); border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 500; transition: all var(--anim-normal); }
        .demo-btn:hover { background: var(--statwell-teal); color: var(--white); }
        .demo-btn.active { background: var(--primary); color: var(--white); }

        /* Hidden States */
        .state { display: none; }
        .state.active { display: block; }
        
        /* Tab Content */
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Completed Task Styles */
        .task-card.completed { background: rgba(16, 185, 129, 0.1); border-color: rgba(16, 185, 129, 0.2); }
        .task-card.completed .task-title { text-decoration: line-through; color: var(--text-secondary); }
        .task-card.completed .task-date { color: var(--success); }

        /* Empty State */
        .empty-state { text-align: center; padding: var(--space-xl); color: var(--text-secondary); }
        .empty-state-icon { font-size: 48px; margin-bottom: var(--space-md); }
        .empty-state-title { font-weight: 600; margin-bottom: var(--space-sm); font-size: 18px; }
        .empty-state-description { font-size: 14px; }
        
        /* Tab Empty State */
        .tab-empty-state { 
            text-align: center; 
            padding: 64px; 
            color: var(--text-secondary);
            background: var(--white);
            border-radius: 16px;
            border: 1px dashed var(--border-secondary);
            margin: var(--space-lg) 0;
        }
        .tab-empty-state-icon { 
            margin-bottom: var(--space-lg); 
            opacity: 0.6;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .tab-empty-state-title { 
            font-weight: 600; 
            margin-bottom: var(--space-sm); 
            font-size: 20px; 
            color: var(--text-primary);
        }
        .tab-empty-state-description { 
            font-size: 14px; 
            line-height: 1.6; 
            max-width: 500px; 
            margin: 0 auto;
        }

        /* Get Started Section */
        .get-started-section { padding: var(--space-xl) 0 var(--space-lg) 0; margin-top: var(--space-xl); }
        .get-started-title { font-size: 24px; font-weight: 700; font-family: var(--font-primary); margin-bottom: var(--space-sm); color: var(--text-primary); }
        .get-started-subtext { font-size: 14px; font-weight: 400; color: var(--text-secondary); margin-bottom: var(--space-lg); }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
                padding: var(--space-md);
            }
            
            .main-content {
                margin-left: 0;
                padding: var(--space-md);
            }
            
            .dashboard-container {
                flex-direction: column;
            }
            
            .page-title {
                font-size: 24px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-md);
            }
            
            .header-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .header-actions .btn {
                width: 100%;
                justify-content: center;
            }
            
            .task-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-md);
            }
            
            .task-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .task-actions .btn {
                font-size: 12px;
                padding: 8px 12px;
            }
            
            .session-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-sm);
            }
            
            .support-link {
                font-size: 10px;
                line-height: 1.4;
            }
            
            .demo-controls {
                position: static;
                margin-bottom: var(--space-md);
                width: 100%;
                right: auto;
                top: auto;
            }
        }

    </style>
</head>
<body>
    <!-- Demo Controls -->
    <div class="demo-controls">
        <h3>Dashboard States</h3>
        <div class="demo-buttons">
            <button class="demo-btn active" onclick="showState('new-user')">New User</button>
            <button class="demo-btn" onclick="showState('active-user')">Active User (No Completed)</button>
            <button class="demo-btn" onclick="showState('active-user-completed')">Active User (With Completed)</button>
        </div>
    </div>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="user-info">
                <div class="platform-dropdown">
                    <div class="platform-switcher" onclick="togglePlatformDropdown()">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div class="logo-icon">UC</div>
                            <div style="display: flex; flex-direction: column; gap: var(--space-xs);">
                                <span>Urgent Care</span>
                                <span style="font-size: 12px; color: rgba(255,255,255,0.7);">Maurice Umoh</span>
                            </div>
                        </div>
                        <svg class="chevron-icon" viewBox="0 0 24 24">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="platform-dropdown-content" id="platform-dropdown">
                        <a href="#" class="platform-dropdown-item">
                            <svg class="dropdown-icon" viewBox="0 0 24 24">
                                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                <path d="M3 3v5h5"/>
                            </svg>
                            Switch to Medicals
                        </a>
                        <a href="#" class="platform-dropdown-item">
                            <svg class="dropdown-icon" viewBox="0 0 24 24">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                <polyline points="16,17 21,12 16,7"/>
                                <line x1="21" y1="12" x2="9" y2="12"/>
                            </svg>
                            Log out
                        </a>
                    </div>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="#" class="nav-link active">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
                    Home <span class="nav-badge">21</span></a></li>
                <li class="nav-item"><a href="#" class="nav-link">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    Conditions</a></li>
                <li class="nav-item"><a href="#" class="nav-link">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10,9 9,9 8,9"/></svg>
                    Encounters</a></li>
                <li class="nav-item"><a href="#" class="nav-link">
                    <svg class="nav-icon" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                    Appointments</a></li>
                <li class="nav-item"><a href="#" class="nav-link">
                    <svg class="nav-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    Settings</a></li>
                <li class="nav-item"><a href="#" class="nav-link">
                    <svg class="nav-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    Support</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div>
                    <div class="welcome-text">Welcome, Henry</div>
                    <div class="page-title">Home</div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary">+ Create New Refill</button>
                    <button class="btn btn-primary">Start a Treatment</button>
                </div>
            </div>


            <!-- New User State -->
            <div class="state active" id="new-user-state">
                <div class="task-card expanded" data-task="health-profile">
                    <div class="task-header" onclick="toggleTask(this)">
                        <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="task-content-wrapper">
                            <div class="task-title-row">
                                <div class="task-title">Complete Your Health Profile</div>
                                <span class="priority-badge">Priority</span>
                            </div>
                            <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-primary">Get started</button>
                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </div>
                    </div>
                    <div class="task-content">
                        <div class="task-description">
                            Before we begin, we need to collect a few key details about your health, allergies, medications, and medical history. This helps us ensure your safety and accuracy in your treatment.
                        </div>
                        <div class="task-details">
                            <div class="task-detail">
                                <span class="task-detail-label">Estimated Time</span>
                                <span class="task-detail-value">2-3 minutes</span>
                            </div>
                            <div class="task-detail">
                                <span class="task-detail-label">Required</span>
                                <span class="task-detail-value">Yes, before medication</span>
                            </div>
                        </div>
                        <div class="support-link">
                            Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                        </div>
                    </div>
                </div>

                <div class="get-started-section">
                    <div class="get-started-title">Get Started</div>
                    <div class="get-started-subtext">Perform any of these tasks to start your first session.</div>
                </div>

                <div class="task-card" data-task="diagnosis">
                    <div class="task-header" onclick="toggleTask(this)">
                        <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="task-content-wrapper">
                            <div class="task-title-row">
                                <div class="task-title">Get diagnosed with Alfie</div>
                            </div>
                            <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-primary">Talk to Alfie</button>
                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </div>
                    </div>
                    <div class="task-content">
                        <div class="task-description">
                            Begin your chat with Alfie to get a preliminary diagnosis. This step helps us understand your symptoms and guide you to the right care.
                        </div>
                        <div class="task-details">
                            <div class="task-detail">
                                <span class="task-detail-label">Estimated Time</span>
                                <span class="task-detail-value">2-3 minutes</span>
                            </div>
                        </div>
                        <div class="support-link">
                            Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                        </div>
                    </div>
                </div>

                <div class="task-card" data-task="condition">
                    <div class="task-header" onclick="toggleTask(this)">
                        <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="task-content-wrapper">
                            <div class="task-title-row">
                                <div class="task-title">Select a Condition Manually</div>
                            </div>
                            <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-primary">Select condition</button>
                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </div>
                    </div>
                    <div class="task-content">
                        <div class="task-description">
                            If you already know your condition, you can select it directly to speed up the process. This helps us quickly match you with the right treatment plan.
                        </div>
                        <div class="task-details">
                            <div class="task-detail">
                                <span class="task-detail-label">Estimated Time</span>
                                <span class="task-detail-value">2-3 minutes</span>
                            </div>
                        </div>
                        <div class="support-link">
                            Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                        </div>
                    </div>
                </div>

                <div class="task-card" data-task="refill">
                    <div class="task-header" onclick="toggleTask(this)">
                        <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="task-content-wrapper">
                            <div class="task-title-row">
                                <div class="task-title">Start a Medication Refill</div>
                            </div>
                            <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-primary">Start refill</button>
                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </div>
                    </div>
                    <div class="task-content">
                        <div class="task-description">
                            Need more of your prescribed medication? Request a refill here to stay on track with your treatment and avoid interruptions.
                        </div>
                        <div class="task-details">
                            <div class="task-detail">
                                <span class="task-detail-label">Estimated Time</span>
                                <span class="task-detail-value">2-3 minutes</span>
                            </div>
                        </div>
                        <div class="support-link">
                            Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active User State -->
            <div class="state" id="active-user-state">
                <!-- Treatment Tabs -->
                <div class="tabs-container">
                    <div class="tab active" onclick="switchMainTab('ongoing')">
                        Ongoing treatment <span class="tab-badge" id="ongoing-tab-count">4</span>
                    </div>
                    <div class="tab" onclick="switchMainTab('completed')">
                        Completed treatment <span class="tab-badge" id="completed-tab-count">0</span>
                    </div>
                </div>

                <!-- Ongoing Treatment Content -->
                <div class="tab-content active" id="ongoing-content">
                <div class="session-card expanded" data-session="session-1" data-status="ongoing">
                    <div class="session-header" onclick="toggleSession(this)">
                        <div class="session-info">
                            <div class="session-progress-line"></div>
                            <div>
                                <div class="session-title-row">
                                    <div class="session-title"># Session 1</div>
                                    <div class="session-badge">Ongoing</div>
                                </div>
                            </div>
                        </div>
                        <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </div>
                    <div class="session-content" style="padding: var(--space-lg);">
                        <div class="task-card" data-task="diagnosis">
                            <div class="task-header" onclick="toggleTask(this)">
                                <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                                <div class="task-content-wrapper">
                                    <div class="task-title-row">
                                        <div class="task-title">Get diagnosed with Alfie</div>
                                    </div>
                                    <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                                </div>
                                <div class="task-actions">
                                    <button class="btn btn-primary">Talk to Alfie</button>
                                    <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                </div>
                            </div>
                            <div class="task-content">
                                <div class="task-description">
                                    Begin your chat with Alfie to get a preliminary diagnosis. This step helps us understand your symptoms and guide you to the right care.
                                </div>
                                <div class="task-details">
                                    <div class="task-detail">
                                        <span class="task-detail-label">Estimated Time</span>
                                        <span class="task-detail-value">2-3 minutes</span>
                                    </div>
                                </div>
                                <div class="support-link">
                                    Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                                </div>
                            </div>
                        </div>

                        <div class="task-card" data-task="condition">
                            <div class="task-header" onclick="toggleTask(this)">
                                <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                                <div class="task-content-wrapper">
                                    <div class="task-title-row">
                                        <div class="task-title">Select a Condition Manually</div>
                                    </div>
                                    <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                                </div>
                                <div class="task-actions">
                                    <button class="btn btn-primary">Select condition</button>
                                    <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                </div>
                            </div>
                            <div class="task-content">
                                <div class="task-description">
                                    If you already know your condition, you can select it directly to speed up the process. This helps us quickly match you with the right treatment plan.
                                </div>
                                <div class="task-details">
                                    <div class="task-detail">
                                        <span class="task-detail-label">Estimated Time</span>
                                        <span class="task-detail-value">2-3 minutes</span>
                                    </div>
                                </div>
                                <div class="support-link">
                                    Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                                </div>
                            </div>
                        </div>

                        <div class="task-card" data-task="refill">
                            <div class="task-header" onclick="toggleTask(this)">
                                <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                                <div class="task-content-wrapper">
                                    <div class="task-title-row">
                                        <div class="task-title">Start a Medication Refill</div>
                                    </div>
                                    <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                                </div>
                                <div class="task-actions">
                                    <button class="btn btn-primary">Start refill</button>
                                    <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                </div>
                            </div>
                            <div class="task-content">
                                <div class="task-description">
                                    Need more of your prescribed medication? Request a refill here to stay on track with your treatment and avoid interruptions.
                                </div>
                                <div class="task-details">
                                    <div class="task-detail">
                                        <span class="task-detail-label">Estimated Time</span>
                                        <span class="task-detail-value">2-3 minutes</span>
                                    </div>
                                </div>
                                <div class="support-link">
                                    Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="session-card" data-session="session-2" data-status="ongoing">
                    <div class="session-header" onclick="toggleSession(this)">
                        <div class="session-info">
                            <div class="session-progress-line"></div>
                            <div>
                                <div class="session-title-row">
                                    <div class="session-title"># Session 2</div>
                                    <div class="session-badge">Ongoing</div>
                                </div>
                            </div>
                        </div>
                        <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </div>
                    <div class="session-content" style="padding: var(--space-lg); display: none;">
                        <div class="session-task-tabs">
                            <div class="session-task-tab active" onclick="switchSessionTab(this, 'todo')">
                                To-do <span class="session-task-counter">1</span>
                            </div>
                            <div class="session-task-tab" onclick="switchSessionTab(this, 'completed')">
                                Completed <span class="session-task-counter">0</span>
                            </div>
                        </div>
                        <div class="session-todo-content">
                            <div class="task-card" data-task="payment">
                                <div class="task-header" onclick="toggleTask(this)">
                                    <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                                    <div class="task-content-wrapper">
                                        <div class="task-title-row">
                                            <div class="task-title">Pay for Medication Refill</div>
                                        </div>
                                        <div class="task-date">Due: Friday, September 26, 2025</div>
                                    </div>
                                    <div class="task-actions">
                                        <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                    </div>
                                </div>
                                <div class="task-content">
                                    <div class="task-description">
                                        Complete payment for your medication refill to proceed with your prescription.
                                    </div>
                                    <div class="task-details">
                                        <div class="task-detail">
                                            <span class="task-detail-label">Estimated Time</span>
                                            <span class="task-detail-value">2-3 minutes</span>
                                        </div>
                                        <div class="task-detail">
                                            <span class="task-detail-label">Required</span>
                                            <span class="task-detail-value">Yes</span>
                                        </div>
                                        <div class="task-detail">
                                            <span class="task-detail-label">Amount</span>
                                            <span class="task-detail-value">$45.99</span>
                                        </div>
                                    </div>
                                    <div class="task-actions">
                                        <button class="btn btn-primary">Pay Now</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="session-completed-content" style="display: none;">
                            <div class="empty-state">
                                <div class="empty-state-icon">
                                    <svg style="width: 48px; height: 48px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10,9 9,9 8,9"/>
                                    </svg>
                                </div>
                                <div class="empty-state-title">No completed tasks</div>
                                <div class="empty-state-description">Complete your pending tasks to see them here.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Session Card with Completed Tasks -->
                <div class="session-card expanded" data-session="session-3" data-status="ongoing">
                    <div class="session-header" onclick="toggleSession(this)">
                        <div class="session-info">
                            <div class="session-progress-line"></div>
                            <div>
                                <div class="session-title-row">
                                    <div class="session-title"># Session 3</div>
                                    <div class="session-badge">Ongoing</div>
                                </div>
                            </div>
                        </div>
                        <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </div>
                    <div class="session-content" style="padding: var(--space-lg);">
                        <div class="session-task-tabs">
                            <div class="session-task-tab" onclick="switchSessionTab(this, 'todo')">
                                To-do <span class="session-task-counter">0</span>
                            </div>
                            <div class="session-task-tab active" onclick="switchSessionTab(this, 'completed')">
                                Completed <span class="session-task-counter">1</span>
                            </div>
                        </div>
                        <div class="session-todo-content" style="display: none;">
                            <div class="empty-state">
                                <div class="empty-state-icon">
                                    <svg style="width: 48px; height: 48px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10,9 9,9 8,9"/>
                                    </svg>
                                </div>
                                <div class="empty-state-title">No pending tasks</div>
                                <div class="empty-state-description">All tasks for this session have been completed.</div>
                            </div>
                        </div>
                        <div class="session-completed-content">
                            <div class="task-card completed" data-task="payment">
                                <div class="task-header" onclick="toggleTask(this)">
                                    <div class="task-icon completed">
                                        <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                            <polyline points="20,6 9,17 4,12"/>
                                        </svg>
                                    </div>
                                    <div class="task-content-wrapper">
                                        <div class="task-title-row">
                                            <div class="task-title">Pay for Medication Refill</div>
                                        </div>
                                        <div class="task-date">Completed: Friday, September 26, 2025</div>
                                    </div>
                                    <div class="task-actions">
                                        <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                    </div>
                                </div>
                                <div class="task-content">
                                    <div class="task-description">
                                        Payment has been successfully processed for your medication refill. Your prescription will be ready for pickup shortly.
                                    </div>
                                    <div class="task-details">
                                        <div class="task-detail">
                                            <span class="task-detail-label">Payment Method</span>
                                            <span class="task-detail-value">Credit Card ending in 4242</span>
                                        </div>
                                        <div class="task-detail">
                                            <span class="task-detail-label">Amount</span>
                                            <span class="task-detail-value">$45.99</span>
                                        </div>
                                        <div class="task-detail">
                                            <span class="task-detail-label">Transaction ID</span>
                                            <span class="task-detail-value">TXN-789012</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Session Card in Review State -->
                <div class="session-card expanded" data-session="session-4" data-status="ongoing">
                    <div class="session-header" onclick="toggleSession(this)">
                        <div class="session-info">
                            <div class="session-progress-line"></div>
                            <div>
                                <div class="session-title-row">
                                    <div class="session-title"># Session 4</div>
                                    <div class="session-badge">Ongoing</div>
                                </div>
                            </div>
                        </div>
                        <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </div>
                    <div class="session-content" style="padding: var(--space-lg);">
                        <div class="review-state">
                            <div class="review-icon">
                                <svg style="width: 24px; height: 24px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                            </div>
                            <div class="review-title">Review in Progress</div>
                            <div class="review-description">
                                Your refill is being reviewed by our medical team. You'll receive a task shortly.
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                <!-- End Ongoing Treatment Content -->

                <!-- Completed Treatment Content (Empty State) -->
                <div class="tab-content" id="completed-content">
                    <div class="tab-empty-state">
                        <div class="tab-empty-state-icon">
                            <svg style="width: 64px; height: 64px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                                <path d="M9 11l3 3L22 4"></path>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                            </svg>
                        </div>
                        <div class="tab-empty-state-title">No Completed Treatments Yet</div>
                        <div class="tab-empty-state-description">You haven't completed any treatment sessions yet. Complete a treatment session to see your progress and history here. Your completed treatments will be saved for future reference.</div>
                    </div>
                </div>
                <!-- End Completed Treatment Content -->
            </div>

            <!-- Active User State with Completed -->
            <div class="state" id="active-user-completed-state">
                <!-- Treatment Tabs -->
                <div class="tabs-container">
                    <div class="tab active" onclick="switchMainTab('ongoing')">
                        Ongoing treatment <span class="tab-badge" id="ongoing-tab-count-2">1</span>
                    </div>
                    <div class="tab" onclick="switchMainTab('completed')">
                        Completed treatment <span class="tab-badge" id="completed-tab-count-2">1</span>
                    </div>
                </div>

                <!-- Ongoing Treatment Content -->
                <div class="tab-content active" id="ongoing-content-2">
                <div class="session-card expanded" data-session="session-6" data-status="ongoing">
                    <div class="session-header" onclick="toggleSession(this)">
                        <div class="session-info">
                            <div class="session-progress-line"></div>
                            <div>
                                <div class="session-title-row">
                                    <div class="session-title"># Session 1</div>
                                    <div class="session-badge">Ongoing</div>
                                </div>
                            </div>
                        </div>
                        <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </div>
                    <div class="session-content" style="padding: var(--space-lg);">
                        <div class="task-card" data-task="diagnosis-2">
                            <div class="task-header" onclick="toggleTask(this)">
                                <div class="task-icon pending">
                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                                <div class="task-content-wrapper">
                                    <div class="task-title-row">
                                        <div class="task-title">Get diagnosed with Alfie</div>
                                    </div>
                                    <div class="task-date">
                                <svg style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2; margin-right: 4px; vertical-align: middle;" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                                Friday, October 3, 2025
                            </div>
                                </div>
                                <div class="task-actions">
                                    <button class="btn btn-primary">Talk to Alfie</button>
                                    <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                                </div>
                            </div>
                            <div class="task-content">
                                <div class="task-description">
                                    Begin your chat with Alfie to get a preliminary diagnosis. This step helps us understand your symptoms and guide you to the right care.
                                </div>
                                <div class="task-details">
                                    <div class="task-detail">
                                        <span class="task-detail-label">Estimated Time</span>
                                        <span class="task-detail-value">2-3 minutes</span>
                                    </div>
                                </div>
                                <div class="support-link">
                                    Need help or have questions about withdrawal refunds? Navigate to your support page to send a message or reach out to our support team at hello@statwellmd.com
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                <!-- End Ongoing Treatment Content -->

                <!-- Completed Treatment Content (With Sessions) -->
                <div class="tab-content" id="completed-content-2">
                    <div class="session-card expanded" data-session="session-7" data-status="completed">
                        <div class="session-header" onclick="toggleSession(this)">
                            <div class="session-info">
                                <div class="session-progress-line"></div>
                                <div>
                                    <div class="session-title-row">
                                        <div class="session-title"># Session 5</div>
                                        <div class="session-badge completed">Completed</div>
                                    </div>
                                </div>
                            </div>
                            <svg class="collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </div>
                        <div class="session-content" style="padding: var(--space-lg);">
                            <div class="session-task-tabs">
                                <div class="session-task-tab" onclick="switchSessionTab(this, 'todo')">
                                    To-do <span class="session-task-counter">0</span>
                                </div>
                                <div class="session-task-tab active" onclick="switchSessionTab(this, 'completed')">
                                    Completed <span class="session-task-counter">2</span>
                                </div>
                            </div>
                            <div class="session-todo-content" style="display: none;">
                                <div class="empty-state">
                                    <div class="empty-state-icon">
                                        <svg style="width: 48px; height: 48px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <polyline points="14,2 14,8 20,8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                            <polyline points="10,9 9,9 8,9"/>
                                        </svg>
                                    </div>
                                    <div class="empty-state-title">All tasks completed!</div>
                                    <div class="empty-state-description">All tasks for this session have been completed.</div>
                                </div>
                            </div>
                            <div class="session-completed-content">
                                <div class="task-card completed" data-task="consultation">
                                    <div class="task-header" onclick="toggleTask(this)">
                                        <div class="task-icon completed">
                                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                                <polyline points="20,6 9,17 4,12"/>
                                            </svg>
                                        </div>
                                        <div class="task-content-wrapper">
                                            <div class="task-title-row">
                                                <div class="task-title">Complete Health Consultation</div>
                                            </div>
                                            <div class="task-date">Completed: Monday, September 22, 2025</div>
                                        </div>
                                        <div class="task-actions">
                                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                                <polyline points="6,9 12,15 18,9"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="task-content">
                                        <div class="task-description">
                                            Your health consultation has been completed successfully. The medical team has reviewed your information.
                                        </div>
                                    </div>
                                </div>

                                <div class="task-card completed" data-task="payment-completed">
                                    <div class="task-header" onclick="toggleTask(this)">
                                        <div class="task-icon completed">
                                            <svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                                <polyline points="20,6 9,17 4,12"/>
                                            </svg>
                                        </div>
                                        <div class="task-content-wrapper">
                                            <div class="task-title-row">
                                                <div class="task-title">Pay for Treatment</div>
                                            </div>
                                            <div class="task-date">Completed: Monday, September 22, 2025</div>
                                        </div>
                                        <div class="task-actions">
                                            <svg class="task-collapse-icon" style="width: 14px; height: 14px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                                                <polyline points="6,9 12,15 18,9"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="task-content">
                                        <div class="task-description">
                                            Payment has been successfully processed. Your treatment prescription has been sent to the pharmacy.
                                        </div>
                                        <div class="task-details">
                                            <div class="task-detail">
                                                <span class="task-detail-label">Payment Method</span>
                                                <span class="task-detail-value">Credit Card ending in 4242</span>
                                            </div>
                                            <div class="task-detail">
                                                <span class="task-detail-label">Amount</span>
                                                <span class="task-detail-value">$89.99</span>
                                            </div>
                                            <div class="task-detail">
                                                <span class="task-detail-label">Transaction ID</span>
                                                <span class="task-detail-value">TXN-123456</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Completed Treatment Content -->
            </div>

        </div>
    </div>

    <script>
        let currentState = 'new-user';
        let expandedSessions = new Set();
        let expandedTasks = new Set();

        function showState(state) {
            // Update demo buttons
            document.querySelectorAll('.demo-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all states
            document.querySelectorAll('.state').forEach(s => s.classList.remove('active'));
            
            // Show selected state
            document.getElementById(state + '-state').classList.add('active');
            currentState = state;

            // Update tab counts
            updateTabCounts();
            
            // Update treatment tab counts if in active user state
            if (state === 'active-user') {
                updateTreatmentTabCounts('ongoing-content', 'completed-content', 'ongoing-tab-count', 'completed-tab-count');
            } else if (state === 'active-user-completed') {
                updateTreatmentTabCounts('ongoing-content-2', 'completed-content-2', 'ongoing-tab-count-2', 'completed-tab-count-2');
            }
        }

        function updateTabCounts() {
            if (currentState === 'new-user') {
                document.getElementById('ongoing-count').textContent = '0';
                document.getElementById('completed-count').textContent = '0';
            } else if (currentState === 'active-user') {
                document.getElementById('ongoing-count').textContent = '2';
                document.getElementById('completed-count').textContent = '0';
            } else if (currentState === 'completed-user') {
                document.getElementById('ongoing-count').textContent = '1';
                document.getElementById('completed-count').textContent = '0';
            } else if (currentState === 'review-state') {
                document.getElementById('ongoing-count').textContent = '1';
                document.getElementById('completed-count').textContent = '0';
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
        }

        function switchMainTab(tabType) {
            console.log('switchMainTab called with:', tabType);
            console.log('currentState:', currentState);
            
            // Update tab active states
            const activeState = document.querySelector('.state.active');
            const tabs = activeState.querySelectorAll('.tabs-container .tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
            
            // Determine which content divs to use based on current state
            let ongoingContentId, completedContentId;
            if (currentState === 'active-user-completed') {
                ongoingContentId = 'ongoing-content-2';
                completedContentId = 'completed-content-2';
            } else {
                ongoingContentId = 'ongoing-content';
                completedContentId = 'completed-content';
            }
            
            console.log('Using content IDs:', ongoingContentId, completedContentId);
            
            const ongoingContent = document.getElementById(ongoingContentId);
            const completedContent = document.getElementById(completedContentId);
            
            console.log('Ongoing content element:', ongoingContent);
            console.log('Completed content element:', completedContent);
            
            if (tabType === 'ongoing') {
                if (ongoingContent) {
                    ongoingContent.classList.add('active');
                    console.log('Added active to ongoing content');
                }
                if (completedContent) {
                    completedContent.classList.remove('active');
                    console.log('Removed active from completed content');
                }
            } else {
                if (ongoingContent) {
                    ongoingContent.classList.remove('active');
                    console.log('Removed active from ongoing content');
                }
                if (completedContent) {
                    completedContent.classList.add('active');
                    console.log('Added active to completed content');
                    console.log('Completed content innerHTML:', completedContent.innerHTML);
                }
            }
        }

        function switchSessionTab(tabElement, type) {
            const sessionCard = tabElement.closest('.session-card');
            const tabs = sessionCard.querySelectorAll('.session-task-tab');
            const todoContent = sessionCard.querySelector('.session-todo-content');
            const completedContent = sessionCard.querySelector('.session-completed-content');
            
            // Update tab states
            tabs.forEach(tab => tab.classList.remove('active'));
            tabElement.classList.add('active');
            
            // Show/hide content
            if (type === 'todo') {
                if (todoContent) todoContent.style.display = 'block';
                if (completedContent) completedContent.style.display = 'none';
            } else {
                if (todoContent) todoContent.style.display = 'none';
                if (completedContent) completedContent.style.display = 'block';
            }
        }


        function toggleTask(header) {
            const card = header.closest('.task-card');
            const isExpanded = card.classList.contains('expanded');
            
            // Toggle the task
            card.classList.toggle('expanded');
            
            if (isExpanded) {
                expandedTasks.delete(card.dataset.task);
            } else {
                expandedTasks.add(card.dataset.task);
            }
        }

        function switchSessionTab(tabElement, type) {
            const sessionCard = tabElement.closest('.session-card');
            const tabs = sessionCard.querySelectorAll('.session-task-tab');
            const todoContent = sessionCard.querySelector('.session-todo-content');
            const completedContent = sessionCard.querySelector('.session-completed-content');
            
            // Update tab states
            tabs.forEach(tab => tab.classList.remove('active'));
            tabElement.classList.add('active');
            
            // Show/hide content
            if (type === 'todo') {
                if (todoContent) todoContent.style.display = 'block';
                if (completedContent) completedContent.style.display = 'none';
            } else {
                if (todoContent) todoContent.style.display = 'none';
                if (completedContent) completedContent.style.display = 'block';
            }
        }

        function toggleSession(header) {
            const card = header.closest('.session-card');
            const isExpanded = card.classList.contains('expanded');
            const sessionId = card.dataset.session;
            
            // Ensure at least one session is expanded
            if (isExpanded && expandedSessions.size <= 1) {
                return;
            }

            card.classList.toggle('expanded');
            
            // Show/hide session content
            const content = card.querySelector('.session-content');
            if (content) {
                content.style.display = isExpanded ? 'none' : 'block';
            }
            
            if (isExpanded) {
                expandedSessions.delete(sessionId);
            } else {
                expandedSessions.add(sessionId);
            }
        }

        // Platform dropdown functions
        function togglePlatformDropdown() {
            const dropdown = document.getElementById('platform-dropdown');
            const switcher = document.querySelector('.platform-switcher');
            dropdown.classList.toggle('show');
            switcher.classList.toggle('open');
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.platform-switcher') && !event.target.closest('.platform-dropdown')) {
                const dropdown = document.getElementById('platform-dropdown');
                const switcher = document.querySelector('.platform-switcher');
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                    switcher.classList.remove('open');
                }
            }
        }

        // Update treatment tab counts
        function updateTreatmentTabCounts(ongoingContentId, completedContentId, ongoingCountId, completedCountId) {
            console.log('updateTreatmentTabCounts called with:', ongoingContentId, completedContentId);
            
            const ongoingSessions = document.querySelectorAll(`#${ongoingContentId} .session-card[data-status="ongoing"]`);
            const completedSessions = document.querySelectorAll(`#${completedContentId} .session-card[data-status="completed"]`);
            
            console.log('Ongoing sessions found:', ongoingSessions.length);
            console.log('Completed sessions found:', completedSessions.length);
            
            const ongoingCount = document.getElementById(ongoingCountId);
            const completedCount = document.getElementById(completedCountId);
            
            if (ongoingCount) {
                ongoingCount.textContent = ongoingSessions.length;
            }
            if (completedCount) {
                completedCount.textContent = completedSessions.length;
            }
            
            // Show/hide empty states
            showEmptyStateIfNeeded(ongoingContentId, ongoingSessions.length);
            showEmptyStateIfNeeded(completedContentId, completedSessions.length);
        }
        
        // Show empty state if no sessions
        function showEmptyStateIfNeeded(contentId, sessionCount) {
            console.log('showEmptyStateIfNeeded called for:', contentId, 'with count:', sessionCount);
            
            const content = document.getElementById(contentId);
            if (!content) {
                console.log('Content element not found for:', contentId);
                return;
            }
            
            console.log('Content element found:', content);
            
            let emptyState = content.querySelector('.tab-empty-state');
            console.log('Existing empty state:', emptyState);
            
            if (sessionCount === 0) {
                console.log('Session count is 0, creating empty state');
                // Create empty state if it doesn't exist
                if (!emptyState) {
                    emptyState = document.createElement('div');
                    emptyState.className = 'tab-empty-state';
                    
                    // Determine if this is an ongoing or completed content area
                    const isOngoing = contentId.includes('ongoing');
                    const icon = isOngoing 
                        ? `<svg style="width: 64px; height: 64px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12,6 12,12 16,14"></polyline>
                        </svg>`
                        : `<svg style="width: 64px; height: 64px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                            <path d="M9 11l3 3L22 4"></path>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                        </svg>`;
                    const title = isOngoing ? 'No Ongoing Treatments' : 'No Completed Treatments Yet';
                    const description = isOngoing
                        ? 'You don\'t have any ongoing treatment sessions at the moment. Start a new treatment to begin your journey to better health!' 
                        : 'You haven\'t completed any treatment sessions yet. Complete a treatment session to see your progress and history here. Your completed treatments will be saved for future reference.';
                    
                    emptyState.innerHTML = `
                        <div class="tab-empty-state-icon">${icon}</div>
                        <div class="tab-empty-state-title">${title}</div>
                        <div class="tab-empty-state-description">${description}</div>
                    `;
                    
                    content.appendChild(emptyState);
                    console.log('Empty state created and appended');
                } else {
                    console.log('Empty state already exists');
                }
            } else {
                console.log('Session count is not 0, removing empty state if exists');
                // Remove empty state if sessions exist
                if (emptyState) {
                    emptyState.remove();
                    console.log('Empty state removed');
                }
            }
        }

        // Move session to completed
        function completeSession(sessionId) {
            const sessionCard = document.querySelector(`[data-session="${sessionId}"]`);
            if (!sessionCard) return;
            
            // Update status attribute
            sessionCard.setAttribute('data-status', 'completed');
            
            // Update badge
            const badge = sessionCard.querySelector('.session-badge');
            if (badge) {
                badge.textContent = 'Completed';
                badge.classList.add('completed');
            }
            
            // Move all tasks to completed tab and update counts
            const todoTab = sessionCard.querySelector('.session-task-tab:first-child .session-task-counter');
            const completedTab = sessionCard.querySelector('.session-task-tab:last-child .session-task-counter');
            const todoContent = sessionCard.querySelector('.session-todo-content');
            const completedContent = sessionCard.querySelector('.session-completed-content');
            
            if (todoTab) todoTab.textContent = '0';
            
            // Move all pending tasks to completed
            if (todoContent && completedContent) {
                const pendingTasks = todoContent.querySelectorAll('.task-card');
                pendingTasks.forEach(task => {
                    task.classList.add('completed');
                    const icon = task.querySelector('.task-icon');
                    if (icon) {
                        icon.classList.remove('pending');
                        icon.classList.add('completed');
                        icon.innerHTML = `<svg style="width: 12px; height: 12px; stroke: currentColor; fill: none; stroke-width: 2;" viewBox="0 0 24 24">
                            <polyline points="20,6 9,17 4,12"/>
                        </svg>`;
                    }
                    const dateLabel = task.querySelector('.task-date');
                    if (dateLabel && !dateLabel.textContent.includes('Completed:')) {
                        dateLabel.textContent = 'Completed: ' + new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
                    }
                    completedContent.appendChild(task);
                });
                
                // Update completed count
                const completedTaskCount = completedContent.querySelectorAll('.task-card').length;
                if (completedTab) completedTab.textContent = completedTaskCount;
                
                // Add empty state to todo
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <div class="empty-state-icon">
                        <svg style="width: 48px; height: 48px; stroke: var(--text-secondary); fill: none; stroke-width: 1.5;" viewBox="0 0 24 24">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10,9 9,9 8,9"/>
                        </svg>
                    </div>
                    <div class="empty-state-title">All tasks completed!</div>
                    <div class="empty-state-description">All tasks for this session have been completed.</div>
                `;
                todoContent.innerHTML = '';
                todoContent.appendChild(emptyState);
            }
            
            // Switch to completed tab
            const tabs = sessionCard.querySelectorAll('.session-task-tab');
            if (tabs.length >= 2) {
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
                if (todoContent) todoContent.style.display = 'none';
                if (completedContent) completedContent.style.display = 'block';
            }
            
            // Move to completed content
            const completedContentDiv = document.getElementById('completed-content');
            if (completedContentDiv) {
                completedContentDiv.appendChild(sessionCard);
            }
            
            // Update counts based on current state
            if (currentState === 'active-user-completed') {
                updateTreatmentTabCounts('ongoing-content-2', 'completed-content-2', 'ongoing-tab-count-2', 'completed-tab-count-2');
            } else {
                updateTreatmentTabCounts('ongoing-content', 'completed-content', 'ongoing-tab-count', 'completed-tab-count');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMContentLoaded - Initializing dashboard');
            
            // Ensure at least one session is expanded
            const firstSession = document.querySelector('.session-card');
            if (firstSession) {
                expandedSessions.add(firstSession.dataset.session);
            }
            
            // Ensure at least one task is expanded in new user state
            const firstTask = document.querySelector('.task-card');
            if (firstTask) {
                expandedTasks.add(firstTask.dataset.task);
            }
            
            updateTabCounts();
            // Initialize all states
            console.log('Initializing state 1: active-user (no completed)');
            updateTreatmentTabCounts('ongoing-content', 'completed-content', 'ongoing-tab-count', 'completed-tab-count');
            
            console.log('Initializing state 2: active-user-completed');
            updateTreatmentTabCounts('ongoing-content-2', 'completed-content-2', 'ongoing-tab-count-2', 'completed-tab-count-2');
        });
    </script>
</body>
</html>